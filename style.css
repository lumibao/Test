/* Reset & base */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: #0b0f14; /* dark storm */
  color: #e9eef5;
  overflow: hidden; /* panels are full-viewport */
  transition: background 300ms ease, color 300ms ease;
}
body.light {
  background: #f2f6fb; /* bright overcast */
  color: #0c1220;
}

/* Weather layers */
#weather-canvas {
  position: fixed;
  inset: 0;
  z-index: 0;  /* behind content */
  display: block;
}
#lightning-flash {
  position: fixed;
  inset: 0;
  z-index: 1;
  background: rgba(255,255,255,0.9), rgba(255,255,255,0.0) 60%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 120ms ease;
}

/* Theme switch (animated) */
.theme-toggle {
  position: fixed; top: 16px; right: 16px; z-index: 5;
}
.switch { position: relative; display: inline-block; width: 64px; height: 36px; }
.switch input { display: none; }
.slider {
  position: absolute; inset: 0; border-radius: 999px;
  background: linear-gradient(180deg,#1f2937,#374151);
  box-shadow: inset 0 2px 6px rgba(0,0,0,.4);
  transition: background 300ms ease, transform 300ms ease;
}
body.light .slider {
  background: linear-gradient(180deg,#e2e8f0,#f8fafc);
  box-shadow: inset 0 2px 6px rgba(0,0,0,.1);
}
.slider::before {
  content: "";
  position: absolute; top: 4px; left: 4px; width: 28px; height: 28px;
  border-radius: 50%;
  background: white;
  box-shadow: 0 4px 10px rgba(0,0,0,.25);
  transition: transform 300ms cubic-bezier(.2,.8,.2,1);
}
input:checked + .slider::before { transform: translateX(28px); }
.icons {
  position: absolute; inset: 0; display: flex; align-items: center; justify-content: space-between;
  padding: 0 8px; font-size: 16px; opacity: .9;
}
.sun, .moon { user-select: none; }

/* Panels layout */
#panels { position: relative; z-index: 2; }
.panel {
  position: relative;
  display: none;
  height: 100vh; width: 100vw;
  padding: clamp(16px, 3vw, 28px);
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 16px;
}
.panel.active { display: flex; animation: panelIn 420ms ease both; }

@keyframes panelIn {
  from { opacity: 0; transform: translateY(12px) scale(.98); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* Intro / typography */
.title {
  font-size: clamp(28px, 6vw, 56px);
  text-align: center;
  letter-spacing: .5px;
  text-shadow: 0 2px 18px rgba(0,0,0,.35);
}
.subtitle {
  opacity: .85;
  margin-top: 4px;
  text-align: center;
}

/* Video player */
.video-player {
  width: min(92vw, 980px);
  max-height: 52vh;
  border-radius: 14px;
  outline: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 8px 34px rgba(0,0,0,.35);
  background: #000;
}

/* Scrollable text box with per-word typewriter */
.text-box {
  width: min(92vw, 980px);
  max-height: 28vh;
  padding: clamp(14px, 2.5vw, 20px);
  border-radius: 16px;
  overflow-y: auto;
  line-height: 1.55;
  font-size: clamp(16px, 2.3vw, 18px);
  text-align: left;
  backdrop-filter: blur(3px);
  background: rgba(8,12,18,.55);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
body.light .text-box {
  background: rgba(255,255,255,.78);
  box-shadow: inset 0 1px 0 rgba(0,0,0,.06);
}

/* Buttons */
button {
  border: 0; cursor: pointer;
  padding: 12px 22px;
  border-radius: 999px;
  font-weight: 600;
  letter-spacing: .2px;
  transition: transform .15s ease, box-shadow .2s ease, opacity .2s;
}
button:active { transform: translateY(1px) scale(.99); }

.primary {
  background: linear-gradient(135deg, #3b82f6, #22d3ee);
  color: white;
  box-shadow: 0 8px 24px rgba(34,211,238,.35);
}
.primary:hover { box-shadow: 0 10px 28px rgba(34,211,238,.45); }

.next-btn {
  position: fixed; right: clamp(12px, 3vw, 24px); bottom: clamp(12px, 3vw, 24px);
  background: linear-gradient(135deg, #64748b, #94a3b8);
  color: #0b0f14;
  box-shadow: 0 8px 22px rgba(100,116,139,.35);
}
body.light .next-btn { color: #0c1220; }
.next-btn:hover { box-shadow: 0 10px 28px rgba(100,116,139,.45); }

/* Loader */
.loading-screen {
  position: fixed; inset: 0; z-index: 6;
  background: rgba(0,0,0,.75);
  display: none; align-items: center; justify-content: center;
  backdrop-filter: blur(2px);
}
.loading-screen.active { display: flex; }
.storm-loader { position: relative; width: 96px; height: 96px; }
.storm-loader .ring {
  position: absolute; inset: 0; border-radius: 50%;
  border: 3px solid transparent;
  border-top-color: #fff;
  animation: spin 1.1s linear infinite;
  opacity: .9;
}
.storm-loader .ring:nth-child(2) { inset: 10px; border-top-color: #93c5fd; animation-duration: 1.4s; }
.storm-loader .ring:nth-child(3) { inset: 20px; border-top-color: #67e8f9; animation-duration: 1.8s; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Outro (credits roll) */
.outro {
  width: min(92vw, 900px);
  padding: clamp(16px, 3vw, 28px);
  border-radius: 18px;
  background: rgba(8,12,18,.55);
  backdrop-filter: blur(3px);
  text-align: center;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
body.light .outro { background: rgba(255,255,255,.78); box-shadow: inset 0 1px 0 rgba(0,0,0,.06); }
.outro-title { font-size: clamp(22px, 4.5vw, 34px); margin-bottom: 12px; }

.credits-window {
  position: relative;
  height: min(46vh, 420px);
  overflow: hidden;
  border-radius: 12px;
  outline: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.15));
  margin-bottom: 14px;
}
body.light .credits-window { background: linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.3)); }

.credits-roll {
  position: absolute; left: 50%; transform: translateX(-50%);
  width: 90%; text-align: center; white-space: pre-line;
  font-size: clamp(16px, 2.4vw, 18px);
  line-height: 1.55;
  filter: drop-shadow(0 2px 10px rgba(0,0,0,.25));
  animation: creditsUp 24s linear forwards;
}
@keyframes creditsUp {
  from { top: 100%; }
  to   { top: -120%; }
}

/* Responsive tweaks */
@media (max-width: 520px) {
  .video-player { max-height: 46vh; }
  .text-box { max-height: 32vh; }
}
